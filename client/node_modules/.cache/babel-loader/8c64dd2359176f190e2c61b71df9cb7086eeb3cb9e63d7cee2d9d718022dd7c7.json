{"ast":null,"code":"/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { __decorate, __metadata } from \"tslib\";\nimport { html } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { APILoader } from '../../api_loader/api_loader.js';\nimport { Deferred } from '../../utils/deferred.js';\nimport { MapController } from '../map_controller.js';\nimport { RouteDataConsumer } from '../route_data_consumer.js';\n/**\n * Renders a marker indicating the origin or destination of a route.\n *\n * @slot - An element to be used as custom marker content on the map. The\n * element will be detached from the DOM and moved into the map's\n * implementation.\n */\nlet RouteMarker = class RouteMarker extends RouteDataConsumer {\n  /**\n   * The inner `google.maps.marker.AdvancedMarkerElement` from the Maps JS API.\n   * This value is set once `innerMarkerPromise` is resolved.\n   */\n  get innerMarker() {\n    return this.innerMarkerDeferred.value;\n  }\n  /**\n   * Resolves to the inner marker when it's ready. It might not be ready\n   * immediately becasue the `AdvancedMarkerElement` class is loaded\n   * asynchronously from the Maps JS API.\n   */\n  get innerMarkerPromise() {\n    return this.innerMarkerDeferred.promise;\n  }\n  constructor() {\n    super();\n    /**\n     * Which waypoint of the route to position the marker on. For now, this is\n     * either \"origin\" or \"destination\"; intermediate waypoints are not yet\n     * supported.\n     */\n    this.waypoint = 'origin';\n    /**\n     * Rollover text for the marker, displayed on mouse hover.\n     */\n    this.title = '';\n    this.innerMarkerDeferred = new Deferred();\n    this.mapController = new MapController(this);\n    this.initMarker();\n  }\n  async initMarker() {\n    const {\n      AdvancedMarkerElement\n    } = await APILoader.importLibrary('marker', this);\n    const marker = new AdvancedMarkerElement();\n    this.innerMarkerDeferred.resolve(marker);\n  }\n  async connectedCallback() {\n    super.connectedCallback();\n    const map = await this.mapController.mapPromise;\n    const marker = await this.innerMarkerPromise;\n    // Make sure the component hasn't been disconnected while awaiting\n    if (this.isConnected) marker.map = map;\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this.innerMarker) this.innerMarker.map = null;\n  }\n  render() {\n    return html`<slot @slotchange=${this.onSlotChange}></slot>`;\n  }\n  updated(changedProperties) {\n    if (changedProperties.has('waypoint') || changedProperties.has('route') || changedProperties.has('contextRoute')) {\n      this.updatePosition();\n    }\n    if (changedProperties.has('title')) this.updateTitle();\n    if (changedProperties.has('zIndex')) this.updateZIndex();\n  }\n  async updatePosition() {\n    const marker = await this.innerMarkerPromise;\n    const route = this.getRoute();\n    if (!route?.legs?.length) {\n      marker.position = null;\n      return;\n    }\n    const firstLeg = route.legs[0];\n    const lastLeg = route.legs[route.legs.length - 1];\n    if (!this.waypoint || this.waypoint === 'origin') {\n      marker.position = firstLeg.start_location;\n    } else if (this.waypoint === 'destination') {\n      marker.position = lastLeg.end_location;\n    } else {\n      this.logger.error(`Unsupported waypoint \"${this.waypoint}\". Waypoint must be \"origin\" or \"destination\".`);\n    }\n  }\n  async updateTitle() {\n    const marker = await this.innerMarkerPromise;\n    marker.title = this.title;\n  }\n  async updateZIndex() {\n    const marker = await this.innerMarkerPromise;\n    marker.zIndex = this.zIndex;\n  }\n  async onSlotChange(e) {\n    const slot = e.target;\n    const assignedElement = slot.assignedElements()[0];\n    if (assignedElement) {\n      const marker = await this.innerMarkerPromise;\n      marker.content = assignedElement;\n    }\n  }\n};\n__decorate([property({\n  type: String,\n  reflect: true\n}), __metadata(\"design:type\", String)], RouteMarker.prototype, \"waypoint\", void 0);\n__decorate([property({\n  type: String,\n  reflect: true\n}), __metadata(\"design:type\", Object)], RouteMarker.prototype, \"title\", void 0);\n__decorate([property({\n  type: Number,\n  attribute: false\n}), __metadata(\"design:type\", Number)], RouteMarker.prototype, \"zIndex\", void 0);\nRouteMarker = __decorate([customElement('gmpx-route-marker'), __metadata(\"design:paramtypes\", [])], RouteMarker);\nexport { RouteMarker };","map":{"version":3,"names":["html","customElement","property","APILoader","Deferred","MapController","RouteDataConsumer","RouteMarker","innerMarker","innerMarkerDeferred","value","innerMarkerPromise","promise","constructor","waypoint","title","mapController","initMarker","AdvancedMarkerElement","importLibrary","marker","resolve","connectedCallback","map","mapPromise","isConnected","disconnectedCallback","render","onSlotChange","updated","changedProperties","has","updatePosition","updateTitle","updateZIndex","route","getRoute","legs","length","position","firstLeg","lastLeg","start_location","end_location","logger","error","zIndex","e","slot","target","assignedElement","assignedElements","content","__decorate","type","String","reflect","Number","attribute"],"sources":["/Users/achiladilshan/Desktop/travelmate/client/node_modules/@googlemaps/extended-component-library/src/route_building_blocks/route_marker/route_marker.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {html, PropertyValues} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\n\nimport {APILoader} from '../../api_loader/api_loader.js';\nimport {Deferred} from '../../utils/deferred.js';\nimport {AdvancedMarkerElement} from '../../utils/googlemaps_types.js';\nimport {MapController} from '../map_controller.js';\nimport {RouteDataConsumer} from '../route_data_consumer.js';\n\ninterface MarkerLibrary {\n  // tslint:disable-next-line:enforce-name-casing\n  AdvancedMarkerElement: typeof google.maps.marker.AdvancedMarkerElement;\n}\n\n/**\n * Renders a marker indicating the origin or destination of a route.\n *\n * @slot - An element to be used as custom marker content on the map. The\n * element will be detached from the DOM and moved into the map's\n * implementation.\n */\n@customElement('gmpx-route-marker')\nexport class RouteMarker extends RouteDataConsumer {\n  /**\n   * Which waypoint of the route to position the marker on. For now, this is\n   * either \"origin\" or \"destination\"; intermediate waypoints are not yet\n   * supported.\n   */\n  @property({type: String, reflect: true})\n  waypoint: 'origin'|'destination' = 'origin';\n\n  /**\n   * Rollover text for the marker, displayed on mouse hover.\n   */\n  @property({type: String, reflect: true}) override title = '';\n\n  /**\n   * The z-index of the marker relative to other Advanced Markers.\n   */\n  @property({type: Number, attribute: false}) zIndex?: number;\n\n  private readonly innerMarkerDeferred = new Deferred<AdvancedMarkerElement>();\n\n  /**\n   * The inner `google.maps.marker.AdvancedMarkerElement` from the Maps JS API.\n   * This value is set once `innerMarkerPromise` is resolved.\n   */\n  get innerMarker(): AdvancedMarkerElement|undefined {\n    return this.innerMarkerDeferred.value;\n  }\n\n  /**\n   * Resolves to the inner marker when it's ready. It might not be ready\n   * immediately becasue the `AdvancedMarkerElement` class is loaded\n   * asynchronously from the Maps JS API.\n   */\n  get innerMarkerPromise(): Promise<AdvancedMarkerElement> {\n    return this.innerMarkerDeferred.promise;\n  }\n\n  private readonly mapController = new MapController(this);\n\n  constructor() {\n    super();\n    this.initMarker();\n  }\n\n  private async initMarker() {\n    const {AdvancedMarkerElement} =\n        await APILoader.importLibrary('marker', this) as unknown as\n        MarkerLibrary;\n    const marker = new AdvancedMarkerElement();\n    this.innerMarkerDeferred.resolve(marker);\n  }\n\n  override async connectedCallback() {\n    super.connectedCallback();\n    const map = await this.mapController.mapPromise;\n    const marker = await this.innerMarkerPromise;\n    // Make sure the component hasn't been disconnected while awaiting\n    if (this.isConnected) marker.map = map;\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this.innerMarker) this.innerMarker.map = null;\n  }\n\n  protected override render() {\n    return html`<slot @slotchange=${this.onSlotChange}></slot>`;\n  }\n\n  protected override updated(changedProperties: PropertyValues<this>) {\n    if (changedProperties.has('waypoint') || changedProperties.has('route') ||\n        changedProperties.has('contextRoute')) {\n      this.updatePosition();\n    }\n    if (changedProperties.has('title')) this.updateTitle();\n    if (changedProperties.has('zIndex')) this.updateZIndex();\n  }\n\n  private async updatePosition() {\n    const marker = await this.innerMarkerPromise;\n    const route = this.getRoute();\n    if (!route?.legs?.length) {\n      marker.position = null;\n      return;\n    }\n    const firstLeg = route.legs[0];\n    const lastLeg = route.legs[route.legs.length - 1];\n    if (!this.waypoint || this.waypoint === 'origin') {\n      marker.position = firstLeg.start_location;\n    } else if (this.waypoint === 'destination') {\n      marker.position = lastLeg.end_location;\n    } else {\n      this.logger.error(`Unsupported waypoint \"${\n          this.waypoint}\". Waypoint must be \"origin\" or \"destination\".`);\n    }\n  }\n\n  private async updateTitle() {\n    const marker = await this.innerMarkerPromise;\n    marker.title = this.title;\n  }\n\n  private async updateZIndex() {\n    const marker = await this.innerMarkerPromise;\n    marker.zIndex = this.zIndex;\n  }\n\n  private async onSlotChange(e: Event) {\n    const slot = e.target as HTMLSlotElement;\n    const assignedElement = slot.assignedElements()[0];\n    if (assignedElement) {\n      const marker = await this.innerMarkerPromise;\n      marker.content = assignedElement;\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'gmpx-route-marker': RouteMarker;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}